{"version":3,"sources":["components/square.jsx","components/board.jsx","components/playercard.jsx","components/scoreboard.jsx","models/piece.js","models/knight.js","models/bishop.js","models/king.js","models/queen.js","models/rook.js","models/pawn.js","models/history.js","models/player.js","models/square.js","components/game.jsx","app.js","reportWebVitals.js","index.js"],"names":["Square","React","Component","render","this","props","piece","_jsx","className","concat","cssClasses","onClick","children","src","image","alt","name","Board","renderSquare","square","_this$props$lastMove","_this$props$lastMove2","_this$props$selectedS","bgColor","lastMove","move_from","index","move_to","selectedSquare","checkmate","restart","displayedBoard","x","boardRow","y","push","squares","href","_jsxs","message","PlayerCard","displayGraveyard","graveyard","map","i","height","width","player","color","current","Scoreboard","displayMoveList","moves","moveList","whiteMove","blackMove","length","_blackMove","notation","players","whiteGraveyard","blackGraveyard","Piece","constructor","pieceName","hasMoved","process","pieceAtSquare","teamPieceAtSquare","enemyPieceAtSquare","atLeftBorder","position","atRightBorder","atTopBorder","atBottomBorder","Knight","super","possibleMoves","currentPosition","possibilities","possibleMove","canMoveUp","canMoveLeft","canMoveRight","canMoveDown","arguments","undefined","Bishop","King","Queen","indexAtPosition","step","centerMovePossible","leftMovePossible","rightMovePossible","indexAtCenter","indexAtLeftDiagonal","indexAtRightDiagonal","direction","Rook","Pawn","baseMovement","inFifthRank","includes","History","logMove","description","translateToChessNotation","moveDescription","capture","promotion","suffix","castle","getColumn","getRow","check","Player","row","column","defaultBgColor","Game","setPlayers","state","initializeBoard","history","Array","fill","col","pieces","validateMove","destinationSquare","previewMove","initSquares","cloneDeep","validateSelectedSquare","_square$piece","handleClick","squareClicked","selectSquare","movePiece","canCastle","canEnPassant","enpassant","setState","oldState","_destinationSquare$pi","_destinationSquare$pi2","options","rookSquare","getCastlingRook","enPassantSquare","getEnPassantPawn","nextPlayer","kingSquare","find","_square$piece2","enemySquares","idx","teammates","teammate","availableMove","_enemyPawnSquare$piec","_enemyPawnSquare$piec2","enemyPawnSquare","Math","abs","squaresBetweenKingAndRook","squaresBetweenLocations","squaresBetweenKingAndDestination","j","castlingSquare","square1","square2","squaresBetween","App","reportWebVitals","onPerfEntry","Function","then","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2674743e.chunk.js","sourcesContent":["import React from 'react';\n\nexport default class Square extends React.Component {\n  render() {\n    if (this.props.piece) {\n      return (\n        <div className={`square ${this.props.cssClasses}`} onClick={this.props.onClick}>\n          <img src={this.props.piece.image} alt={this.props.piece.name}/>\n        </div>\n      );\n    } else {\n      return (\n        <div className={`square ${this.props.cssClasses}`} onClick={this.props.onClick}>\n          <span className=\"sr-only\">empty square</span>\n        </div>\n      );\n    }\n  }\n};\n","import Square from './square';\nimport React from 'react';\n\nexport default class Board extends React.Component {\n  renderSquare(square) {\n    let cssClasses = square.bgColor;\n\n    if (this.props.lastMove?.move_from === square.index || this.props.lastMove?.move_to === square.index) {\n      cssClasses = 'bg-orange';\n    } else if (this.props.selectedSquare?.piece === square.piece) {\n      cssClasses += ' border-blue';\n    }\n\n    if (this.props.checkmate) {\n      return <Square key={square.index} piece={square.piece} cssClasses={cssClasses} />;\n    } else {\n      return <Square key={square.index} piece={square.piece} cssClasses={cssClasses} onClick={() => this.props.onClick(square)} />;\n    }\n  }\n\n  render() {\n    let displayedBoard = [];\n    let index = 0;\n\n    for (var x = 0; x < 8; x++) {\n      let boardRow = [];\n      for (var y = 0; y < 8; y++) {\n        boardRow.push(this.renderSquare(this.props.squares[index]));\n        index += 1;\n      }\n      displayedBoard.push(<div className=\"row\" key={x}>{boardRow}</div>);\n    }\n\n    let restart;\n\n    if (this.props.checkmate) {\n      restart = <a href=\"/\">Play again?</a>;\n    }\n\n    return (\n      <div className=\"board my-2\">\n        {displayedBoard}\n        <p>{this.props.message}</p>\n        {restart}\n      </div>\n    );\n  }\n};\n","import React from 'react';\n\nexport default class PlayerCard extends React.Component {\n  displayGraveyard() {\n    return this.props.graveyard.map((piece, i) => {\n      return <img key={`${piece.name}-${i}`} src={piece.image} alt={piece.name} height=\"20px\" width=\"20px\"/>;\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"player-card bg-white d-flex flex-column justify-content-between p-1 m-2\">\n        <div className=\"d-flex justify-content-between\">\n          <h2 className=\"m-0 capitalize\">{this.props.player.color}</h2>\n          <span className={`bg-grey p-1 white badge ${this.props.current === this.props.player ? 'bg-blue' : 'bg-grey' }`}>Your turn</span>\n        </div>\n\n        <div className=\"graveyard d-flex\">\n          {this.displayGraveyard()}\n        </div>\n      </div>\n    );\n  }\n};\n","import React from 'react';\nimport PlayerCard from './playercard';\n\nexport default class Scoreboard extends React.Component {\n  displayMoveList(moves) {\n    const moveList = [];\n    let whiteMove, blackMove;\n\n    for (let i = 0; i < moves.length; i++) {\n      whiteMove = moves[i];\n      blackMove = null;\n\n      if (i !== (moves.length - 1)) {\n        i += 1;\n        blackMove = moves[i];\n      }\n\n      moveList.push(\n        <li key={i}>\n          <div className=\"move-description\">\n            <span>{whiteMove.notation}</span>\n            <span>{blackMove?.notation}</span>\n          </div>\n        </li>\n      );\n    }\n\n    return moveList;\n  }\n\n  render() {\n    return (\n      <section className=\"scoreboard h-100 d-flex flex-column justify-content-between\">\n        <PlayerCard player={this.props.players['black']} current={this.props.current} graveyard={this.props.whiteGraveyard} />\n        <div className=\"h-100 p-2\">\n          <div className=\"move-history bg-white h-100 scrollable\">\n            <ol className=\"d-inline-block\">\n              {this.displayMoveList(this.props.moves)}\n            </ol>\n          </div>\n        </div>\n        <PlayerCard player={this.props.players['white']} current={this.props.current} graveyard={this.props.blackGraveyard} />\n      </section>\n    );\n  }\n};\n","export default class Piece {\n  constructor(color, pieceName) {\n    this.color = color;\n    this.hasMoved = false;\n    this.image = `${process.env.PUBLIC_URL}/${pieceName}-${color}.png`;\n    this.name = `${color} ${pieceName}`;\n  }\n\n  pieceAtSquare(squares, index) {\n    return squares[index] && squares[index].piece;\n  }\n\n  teamPieceAtSquare(squares, index) {\n    return this.pieceAtSquare(squares, index) && squares[index].piece.color === this.color;\n  }\n\n  enemyPieceAtSquare(squares, index) {\n    return this.pieceAtSquare(squares, index) && squares[index].piece.color !== this.color;\n  }\n\n  atLeftBorder(position) {\n    return position % 8 === 0;\n  }\n\n  atRightBorder(position) {\n    return (position + 1) % 8 === 0;\n  }\n\n  atTopBorder(position) {\n    return position < 8;\n  }\n\n  atBottomBorder(position) {\n    return position > 55;\n  }\n}\n","import Piece from './piece';\n\nexport default class Knight extends Piece {\n  constructor(color) {\n    super(color, 'knight');\n    this.className = 'Knight';\n  }\n\n  possibleMoves(squares, currentPosition) {\n    const possibilities = [];\n    let possibleMove;\n\n    if (this.canMoveUp(currentPosition, 2)) {\n      // Check 2 up, 1 left move\n      possibleMove = currentPosition - 17;\n      if (this.canMoveLeft(currentPosition, 1) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n\n      // Check 2 up, 1 right move\n      possibleMove = currentPosition - 15;\n      if (this.canMoveRight(currentPosition, 1) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    if (this.canMoveUp(currentPosition, 1)) {\n      // Check 1 up, 2 left move\n      possibleMove = currentPosition - 10;\n      if (this.canMoveLeft(currentPosition, 2) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n\n      // Check 1 up, 2 right move\n      possibleMove = currentPosition - 6;\n      if (this.canMoveRight(currentPosition, 2) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    if (this.canMoveDown(currentPosition, 2)) {\n      // Check 2 down, 1 left move\n      possibleMove = currentPosition + 15;\n      if (this.canMoveLeft(currentPosition, 1) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n\n      // Check 2 down, 1 right move\n      possibleMove = currentPosition + 17;\n      if (this.canMoveRight(currentPosition, 1) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    if (this.canMoveDown(currentPosition, 1)) {\n      // Check 1 down, 2 left move\n      possibleMove = currentPosition + 6;\n      if (this.canMoveLeft(currentPosition, 2) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n\n\n      // Check 1 down, 2 right move\n      possibleMove = currentPosition + 10;\n      if (this.canMoveRight(currentPosition, 2) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    return possibilities;\n  }\n\n  canMoveUp(currentPosition, spaces = 1) {\n    if (spaces === 2) {\n      return currentPosition > 15;\n    } else {\n      return currentPosition > 7;\n    }\n  }\n\n  canMoveLeft(currentPosition, spaces = 1) {\n    if (spaces === 2) {\n      return (currentPosition - 1) % 8 !== 0 && currentPosition % 8 !== 0;\n    } else {\n      return currentPosition % 8 !== 0;\n    }\n  }\n\n  canMoveRight(currentPosition, spaces = 1) {\n    if (spaces === 2) {\n      return (currentPosition + 2) % 8 !== 0 && (currentPosition + 1) % 8 !== 0;\n    } else {\n      return (currentPosition + 1) % 8 !== 0;\n    }\n  }\n\n  canMoveDown(currentPosition, spaces = 2) {\n    if (spaces === 2) {\n      return currentPosition < 48;\n    } else {\n      return currentPosition < 56;\n    }\n  }\n}\n","import Piece from './piece';\n\nexport default class Bishop extends Piece {\n  constructor(color) {\n    super(color, 'bishop');\n    this.className = 'Bishop';\n  }\n\n  possibleMoves(squares, currentPosition) {\n    const possibilities = [];\n    let possibleMove;\n\n    // Add moves from the top left diagonal\n    possibleMove = currentPosition;\n    while(!this.atLeftBorder(possibleMove) && !this.atTopBorder(possibleMove)) {\n      possibleMove -= 9;\n      if (this.enemyPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n        break;\n      } else if (this.pieceAtSquare(squares, possibleMove)) {\n        break;\n      } else {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    // Add moves from the top right diagonal\n    possibleMove = currentPosition;\n    while(!this.atRightBorder(possibleMove) && !this.atTopBorder(possibleMove)) {\n      possibleMove -= 7;\n\n      if (this.enemyPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n        break;\n      } else if (this.pieceAtSquare(squares, possibleMove)) {\n        break;\n      } else {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    // Add moves from the bottom left diagonal\n    possibleMove = currentPosition;\n    while(!this.atLeftBorder(possibleMove) && !this.atBottomBorder(possibleMove)) {\n      possibleMove += 7;\n\n      if (this.enemyPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n        break;\n      } else if (this.pieceAtSquare(squares, possibleMove)) {\n        break;\n      } else {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    // Add moves from the bottom right diagonal\n    possibleMove = currentPosition;\n    while(!this.atRightBorder(possibleMove) && !this.atBottomBorder(possibleMove)) {\n      possibleMove += 9;\n\n      if (this.enemyPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n        break;\n      } else if (this.pieceAtSquare(squares, possibleMove)) {\n        break;\n      } else {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    return possibilities;\n  }\n}\n","import Piece from './piece';\n\nexport default class King extends Piece {\n  constructor(color) {\n    super(color, 'king');\n    this.className = 'King';\n  }\n\n  possibleMoves(squares, currentPosition) {\n    const possibilities = [];\n    let possibleMove;\n\n    if (!this.atTopBorder(currentPosition)) {\n      // Check up move\n      possibleMove = currentPosition - 8;\n      if (!this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n\n      // Check directly up left diagonal move\n      possibleMove = currentPosition - 9;\n      if (!this.atLeftBorder(currentPosition) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n\n      // Check directly up right diagonal move\n      possibleMove = currentPosition - 7;\n      if (!this.atRightBorder(currentPosition) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    // Check left move\n    possibleMove = currentPosition - 1;\n    if (!this.atLeftBorder(currentPosition) && !this.teamPieceAtSquare(squares, possibleMove)) {\n      possibilities.push(possibleMove);\n    }\n\n    // Check right move\n    possibleMove = currentPosition + 1;\n    if (!this.atRightBorder(currentPosition) && !this.teamPieceAtSquare(squares, possibleMove)) {\n      possibilities.push(possibleMove);\n    }\n\n    if (!this.atBottomBorder(currentPosition)) {\n      // Check down move\n      possibleMove = currentPosition + 8;\n      if (!this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n\n      // Check directly down left diagonal move\n      possibleMove = currentPosition + 7;\n      if (!this.atLeftBorder(currentPosition) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n\n      // Check directly down right diagonal move\n      possibleMove = currentPosition + 9;\n      if (!this.atRightBorder(currentPosition) && !this.teamPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    return possibilities;\n  }\n}\n","import Piece from './piece';\n\nexport default class Queen extends Piece {\n  constructor(color, position) {\n    super(color, 'queen');\n    this.className = 'Queen';\n  }\n\n  possibleMoves(squares, currentPosition) {\n    const possibilities = [];\n    let step = 1;\n    let indexAtPosition;\n    let centerMovePossible = !this.atTopBorder(currentPosition);\n    let leftMovePossible = !this.atLeftBorder(currentPosition);\n    let rightMovePossible = !this.atRightBorder(currentPosition);\n\n    // Move up\n    while(this.indexAtCenter(currentPosition, step, 'up') >= 0) {\n      if (leftMovePossible) {\n        indexAtPosition = this.indexAtLeftDiagonal(currentPosition, step, 'up');\n\n        if (this.enemyPieceAtSquare(squares, indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          leftMovePossible = false;\n        } else if (this.pieceAtSquare(squares, indexAtPosition)) {\n          leftMovePossible = false;\n        } else if (this.atLeftBorder(indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          leftMovePossible = false;\n        } else {\n          possibilities.push(indexAtPosition);\n        }\n      }\n\n      if (centerMovePossible) {\n        indexAtPosition = this.indexAtCenter(currentPosition, step, 'up');\n\n        if (this.enemyPieceAtSquare(squares, indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          centerMovePossible = false;\n        } else if (this.pieceAtSquare(squares, indexAtPosition)) {\n          centerMovePossible = false;\n        } else if (this.atTopBorder(indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          centerMovePossible = false;\n        } else {\n          possibilities.push(indexAtPosition);\n        }\n      }\n\n      if (rightMovePossible) {\n        indexAtPosition = this.indexAtRightDiagonal(currentPosition, step, 'up');\n\n        if (this.enemyPieceAtSquare(squares, indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          rightMovePossible = false;\n        } else if (this.pieceAtSquare(squares, indexAtPosition)) {\n          rightMovePossible = false;\n        } else if (this.atRightBorder(indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          rightMovePossible = false;\n        } else {\n          possibilities.push(indexAtPosition);\n        }\n      }\n\n      step += 1;\n    }\n\n    // Move down\n    step = 1;\n    centerMovePossible = !this.atBottomBorder(currentPosition);\n    leftMovePossible = !this.atLeftBorder(currentPosition);\n    rightMovePossible = !this.atRightBorder(currentPosition);\n\n    while(this.indexAtCenter(currentPosition, step, 'down') < 64) {\n      if (leftMovePossible) {\n        indexAtPosition = this.indexAtLeftDiagonal(currentPosition, step, 'down');\n\n        if (this.enemyPieceAtSquare(squares, indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          leftMovePossible = false;\n        } else if (this.pieceAtSquare(squares, indexAtPosition)) {\n          leftMovePossible = false;\n        } else if (this.atLeftBorder(indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          leftMovePossible = false;\n        } else {\n          possibilities.push(indexAtPosition);\n        }\n      }\n\n      if (centerMovePossible) {\n        indexAtPosition = this.indexAtCenter(currentPosition, step, 'down');\n\n        if (this.enemyPieceAtSquare(squares, indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          centerMovePossible = false;\n        } else if (this.pieceAtSquare(squares, indexAtPosition)) {\n          centerMovePossible = false;\n        } else if (this.atBottomBorder(indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          centerMovePossible = false;\n        } else {\n          possibilities.push(indexAtPosition);\n        }\n      }\n\n      if (rightMovePossible) {\n        indexAtPosition = this.indexAtRightDiagonal(currentPosition, step, 'down');\n\n        if (this.enemyPieceAtSquare(squares, indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          rightMovePossible = false;\n        } else if (this.pieceAtSquare(squares, indexAtPosition)) {\n          rightMovePossible = false;\n        } else if (this.atRightBorder(indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          rightMovePossible = false;\n        } else {\n          possibilities.push(indexAtPosition);\n        }\n      }\n\n      step += 1;\n    }\n\n    // Move horizontal\n    step = 1;\n    let canMoveLeft = !this.atLeftBorder(currentPosition);\n    let canMoveRight = !this.atRightBorder(currentPosition);\n    while (canMoveLeft || canMoveRight) {\n      if (canMoveLeft) {\n        indexAtPosition = currentPosition - step;\n        if (this.enemyPieceAtSquare(squares, indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          canMoveLeft = false;\n        } else if (this.pieceAtSquare(squares, indexAtPosition)) {\n          canMoveLeft = false;\n        } else if (this.atLeftBorder(indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          canMoveLeft = false;\n        } else {\n          possibilities.push(indexAtPosition);\n        }\n      }\n\n      if (canMoveRight) {\n        indexAtPosition = currentPosition + step;\n        if (this.enemyPieceAtSquare(squares, indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          canMoveRight = false;\n        } else if (this.pieceAtSquare(squares, indexAtPosition)) {\n          canMoveRight = false;\n        } else if (this.atRightBorder(indexAtPosition)) {\n          possibilities.push(indexAtPosition);\n          canMoveRight = false;\n        } else {\n          possibilities.push(indexAtPosition);\n        }\n      }\n\n      step += 1;\n    }\n\n    return possibilities;\n  }\n\n  indexAtCenter(currentPosition, step, direction) {\n    if (direction === 'up') {\n      return currentPosition - (8 * step);\n    } else if (direction === 'down') {\n      return currentPosition + (8 * step);\n    }\n  }\n\n  indexAtLeftDiagonal(currentPosition, step, direction) {\n    if (direction === 'up') {\n      return currentPosition - (8 * step) - step;\n    } else if (direction === 'down') {\n      return currentPosition + (8 * step) - step;\n    }\n  }\n\n  indexAtRightDiagonal(currentPosition, step, direction) {\n    if (direction === 'up') {\n      return currentPosition - (8 * step) + step;\n    } else if (direction === 'down') {\n      return currentPosition + (8 * step) + step;\n    }\n  }\n}\n","import Piece from './piece'\n\nexport default class Rook extends Piece {\n  constructor(color, position) {\n    super(color, 'rook')\n    this.className = 'Rook';\n  }\n\n  possibleMoves(squares, currentPosition) {\n    const possibilities = [];\n    let possibleMove;\n\n    // Move up\n    possibleMove = currentPosition - 8;\n    while(possibleMove >= 0) {\n      if (this.enemyPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n        break;\n      } else if (this.pieceAtSquare(squares, possibleMove)) {\n        break;\n      } else {\n        possibilities.push(possibleMove);\n      }\n      possibleMove -= 8;\n    }\n\n    // Move down\n    possibleMove = currentPosition + 8;\n    while(possibleMove < 64) {\n      if (this.enemyPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n        break;\n      } else if (this.pieceAtSquare(squares, possibleMove)) {\n        break;\n      } else {\n        possibilities.push(possibleMove);\n      }\n      possibleMove += 8;\n    }\n\n    // Move left\n    possibleMove = currentPosition;\n    while(possibleMove % 8 !== 0) {\n      possibleMove -= 1;\n      if (this.enemyPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n        break;\n      } else if (this.pieceAtSquare(squares, possibleMove)) {\n        break;\n      } else {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    // Move right\n    possibleMove = currentPosition;\n    while((possibleMove + 1) % 8 !== 0) {\n      possibleMove += 1;\n      if (this.enemyPieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n        break;\n      } else if (this.pieceAtSquare(squares, possibleMove)) {\n        break;\n      } else {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    return possibilities;\n  }\n}\n","import Piece from './piece';\n\nexport default class Pawn extends Piece {\n  constructor(color) {\n    super(color, 'pawn');\n    this.className = 'Pawn';\n  }\n\n  possibleMoves(squares, currentPosition) {\n    const possibilities = [];\n    let possibleMove;\n    // White pieces move up the board\n    // Black pieces move down the board\n    let baseMovement = this.color === 'white' ? -8 : 8;\n\n    // Pawns can move up one unless there is a piece in the way\n    possibleMove = currentPosition + baseMovement;\n    if (!this.pieceAtSquare(squares, possibleMove)) {\n      possibilities.push(possibleMove);\n\n      // If the Pawn hasn't moved yet it can move up two unless there is a piece in the way\n      possibleMove += baseMovement;\n      if (!this.hasMoved && !this.pieceAtSquare(squares, possibleMove)) {\n        possibilities.push(possibleMove);\n      }\n    }\n\n    // If there is an enemy at the left diagonal of the pawn then we can strike it\n    possibleMove = currentPosition + baseMovement - 1;\n    if (this.enemyPieceAtSquare(squares, possibleMove)) {\n      possibilities.push(possibleMove);\n    }\n\n    // If there is an enemy at the left diagonal of the pawn then we can strike it\n    possibleMove = currentPosition + baseMovement + 1;\n    if (this.enemyPieceAtSquare(squares, possibleMove)) {\n      possibilities.push(possibleMove);\n    }\n\n    return possibilities;\n  }\n\n  inFifthRank(currentPosition) {\n    if (this.color === 'black') {\n      return [32, 33, 34, 35, 36, 37, 38, 39].includes(currentPosition);\n    } else {\n      return [24, 25, 26, 27, 28, 29, 30, 31].includes(currentPosition);\n    }\n  }\n}\n","export default class History {\n  constructor() {\n    this.moves = [];\n  }\n\n  logMove(description) {\n    description['notation'] = this.translateToChessNotation(\n      description\n    );\n    this.moves.push(description);\n    return description;\n  }\n\n  lastMove() {\n    return this.moves[this.moves.length - 1];\n  }\n\n  translateToChessNotation(moveDescription) {\n    const PIECE_DICTIONARY = {\n      Pawn: '',\n      King: 'K',\n      Queen: 'Q',\n      Bishop: 'B',\n      Knight: 'N',\n      Rook: 'R'\n    };\n\n    let piece, capture, x, y, promotion, suffix;\n\n    if (moveDescription.castle) {\n      if (moveDescription.move_to > moveDescription.move_from) {\n        return '0-0';\n      } else {\n        return '0-0-0';\n      }\n    }\n\n    piece = PIECE_DICTIONARY[moveDescription.piece.className];\n    x = this.getColumn(moveDescription.move_to);\n    y = this.getRow(moveDescription.move_to);\n\n    if (moveDescription.checkmate) {\n      suffix = '#';\n    } else if (moveDescription.check) {\n      suffix = '+';\n    } else {\n      suffix = '';\n    }\n\n    if (moveDescription.capture && moveDescription.piece.className === 'Pawn') {\n      capture = this.getColumn(moveDescription.move_from);\n      capture += 'x';\n    } else if (moveDescription.capture) {\n      capture = 'x';\n    } else {\n      capture = '';\n    }\n\n    if (moveDescription.promotion) {\n      promotion = '=Q'\n    } else {\n      promotion = '';\n    }\n\n    return `${piece}${capture}${x}${y}${promotion}${suffix}`;\n  }\n\n  getColumn(index) {\n    if (index % 8 === 0) {\n      return 'a';\n    } else if ((index - 1) % 8 === 0) {\n      return 'b';\n    } else if ((index - 2) % 8 === 0) {\n      return 'c';\n    } else if ((index - 3) % 8 === 0) {\n      return 'd';\n    } else if ((index - 4) % 8 === 0) {\n      return 'e';\n    } else if ((index - 5) % 8 === 0) {\n      return 'f';\n    } else if ((index - 6) % 8 === 0) {\n      return 'g';\n    } else {\n      return 'h';\n    }\n  }\n\n  getRow(index) {\n    if (index < 8) {\n      return '8';\n    } else if (index < 16) {\n      return '7';\n    } else if (index < 24) {\n      return '6';\n    } else if (index < 32) {\n      return '5';\n    } else if (index < 40) {\n      return '4';\n    } else if (index < 48) {\n      return '3';\n    } else if (index < 56) {\n      return '2';\n    } else {\n      return '1';\n    }\n  }\n}\n","export default class Player {\n  constructor(color) {\n    this.color = color;\n  }\n}\n","export default class Square {\n  constructor(row, column, piece = null) {\n    this.index = (row * 8) + column;\n    this.row = row;\n    this.column = column;\n    this.piece = piece;\n    this.bgColor = this.defaultBgColor();\n  }\n\n  defaultBgColor() {\n    if (this.row % 2 === 0) {\n      return this.column % 2 === 0 ? 'bg-dark' : 'bg-light';\n    } else {\n      return this.column % 2 === 0 ? 'bg-light' : 'bg-dark';\n    }\n  }\n\n  possibleMoves(squares) {\n    if (this.piece) {\n      return this.piece.possibleMoves(squares, this.index);\n    }\n\n    return false;\n  }\n}\n","import React from 'react';\nimport Board from './board';\nimport Scoreboard from './scoreboard';\nimport Knight from '../models/knight';\nimport Bishop from '../models/bishop';\nimport King from '../models/king';\nimport Queen from '../models/queen';\nimport Rook from '../models/rook';\nimport Pawn from '../models/pawn';\nimport History from '../models/history';\nimport Player from '../models/player';\nimport Square from '../models/square';\nimport cloneDeep from 'lodash/cloneDeep';\n\nexport default class Game extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const players = this.setPlayers();\n\n    this.state = {\n      squares: this.initializeBoard(),\n      message: 'Welcome! White\\'s turn.',\n      players: players,\n      current: players['white'],\n      selectedSquare: null,\n      whiteGraveyard: [],\n      blackGraveyard: [],\n      history: new History(),\n      check: false,\n      checkmate: false\n    };\n  }\n\n  initializeBoard() {\n    let squares = Array(64).fill(null);\n\n    // Black pieces\n    squares[0] = new Square(0, 0, new Rook('black'));\n    squares[1] = new Square(0, 1, new Knight('black'));\n    squares[2] = new Square(0, 2, new Bishop('black'));\n    squares[3] = new Square(0, 3, new Queen('black'));\n    squares[4] = new Square(0, 4, new King('black'));\n    squares[5] = new Square(0, 5, new Bishop('black'));\n    squares[6] = new Square(0, 6, new Knight('black'));\n    squares[7] = new Square(0, 7, new Rook('black'));\n\n    // Black pawns\n    squares[8] = new Square(1, 0, new Pawn('black'));\n    squares[9] = new Square(1, 1, new Pawn('black'));\n    squares[10] = new Square(1, 2, new Pawn('black'));\n    squares[11] = new Square(1, 3, new Pawn('black'));\n    squares[12] = new Square(1, 4, new Pawn('black'));\n    squares[13] = new Square(1, 5, new Pawn('black'));\n    squares[14] = new Square(1, 6, new Pawn('black'));\n    squares[15] = new Square(1, 7, new Pawn('black'));\n\n    let index = 16;\n    for (let row = 2; row < 6; row++) {\n      for (let col = 0; col < 8; col++) {\n        squares[index] = new Square(row, col);\n        index += 1;\n      }\n    }\n\n    // White pieces\n    squares[56] = new Square(7, 0, new Rook('white'));\n    squares[57] = new Square(7, 1, new Knight('white'));\n    squares[58] = new Square(7, 2, new Bishop('white'));\n    squares[59] = new Square(7, 3, new Queen('white'));\n    squares[60] = new Square(7, 4, new King('white'));\n    squares[61] = new Square(7, 5, new Bishop('white'));\n    squares[62] = new Square(7, 6, new Knight('white'));\n    squares[63] = new Square(7, 7, new Rook('white'));\n\n    // White pawns\n    squares[48] = new Square(6, 0, new Pawn('white'));\n    squares[49] = new Square(6, 1, new Pawn('white'));\n    squares[50] = new Square(6, 2, new Pawn('white'));\n    squares[51] = new Square(6, 3, new Pawn('white'));\n    squares[52] = new Square(6, 4, new Pawn('white'));\n    squares[53] = new Square(6, 5, new Pawn('white'));\n    squares[54] = new Square(6, 6, new Pawn('white'));\n    squares[55] = new Square(6, 7, new Pawn('white'));\n\n    return squares;\n  }\n\n  pieces(squares, color) {\n    const pieces = [];\n\n    for (let i = 0; i < squares.length; i++) {\n      if (squares[i].piece && squares[i].piece.color === color) {\n        pieces.push(squares[i]);\n      }\n    }\n\n    return pieces;\n  }\n\n  setPlayers() {\n    let players = {};\n    players['white'] = new Player('white');\n    players['black'] = new Player('black');\n    return players;\n  }\n\n  validateMove(selectedSquare, destinationSquare) {\n    return (\n      selectedSquare.possibleMoves(this.state.squares).includes(destinationSquare.index)\n      // Make sure the move doesn't put themself in check\n      && !this.check(this.previewMove(selectedSquare, destinationSquare), this.state.current)\n    );\n  }\n\n  previewMove(selectedSquare, destinationSquare, initSquares = this.state.squares) {\n    let squares = cloneDeep(initSquares);\n    squares[destinationSquare.index].piece = selectedSquare.piece;\n    squares[selectedSquare.index].piece = null;\n\n    return squares;\n  }\n\n  validateSelectedSquare(square) {\n    return square.piece?.color === this.state.current.color;\n  }\n\n  handleClick(squareClicked) {\n    let selectedSquare = this.state.selectedSquare;\n\n    // If user clicked on a square with a piece that belongs to them, mark it selected\n    if (this.validateSelectedSquare(squareClicked)) {\n      return this.selectSquare(squareClicked);\n    // Make move if piece is already selected and valid move\n    } else if (selectedSquare && this.validateMove(selectedSquare, squareClicked)) {\n      return this.movePiece(selectedSquare, squareClicked);\n    // Check if user was trying to castle\n    } else if (selectedSquare && this.canCastle(selectedSquare, squareClicked)) {\n      return this.movePiece(selectedSquare, squareClicked, { castle: true });\n    // Check if user was trying to en passant\n    } else if (selectedSquare && this.canEnPassant(selectedSquare, squareClicked)) {\n      return this.movePiece(selectedSquare, squareClicked, { enpassant: true });\n    // If piece was selected then the move was invalid\n    } else if (selectedSquare) {\n      return this.setState(oldState => ({\n        message: 'You cannot move there.'\n      }));\n    // Else user wasn't allowed to click the square\n    } else {\n      return this.setState(oldState => ({\n        message: `Please select one of the ${this.state.current.color} pieces to move.`\n      }));\n    }\n  }\n\n  movePiece(selectedSquare, destinationSquare, options = {}) {\n    let history = this.state.history;\n    let current = this.state.current;\n    let squares = this.state.squares;\n    let blackGraveyard = this.state.blackGraveyard;\n    let whiteGraveyard = this.state.whiteGraveyard;\n    let capture = false;\n    let promotion = false;\n\n    // Add pieces to the graveyard that have been killed\n    if (destinationSquare.piece?.color === 'white') {\n      whiteGraveyard.push(destinationSquare.piece);\n      capture = true;\n    } else if (destinationSquare.piece?.color === 'black') {\n      blackGraveyard.push(destinationSquare.piece);\n      capture = true;\n    }\n\n    // Castling logic to move the Rook into position, if we are indeed castling here\n    if (options.castle) {\n      let rookSquare = this.getCastlingRook(selectedSquare, destinationSquare);\n\n      if (selectedSquare.index > destinationSquare.index) {\n        squares[destinationSquare.index + 1].piece = rookSquare.piece;\n        rookSquare.piece = null;\n      } else {\n        squares[destinationSquare.index - 1].piece = rookSquare.piece;\n        rookSquare.piece = null;\n      }\n    }\n\n    // En passant logic to capture piece is we are indeed doing an en passant move\n    if (options.enpassant) {\n      let enPassantSquare = this.getEnPassantPawn(selectedSquare, destinationSquare);\n\n      // Add pieces to the graveyard that have been killed\n      if (enPassantSquare.piece.color === 'white') {\n        whiteGraveyard.push(enPassantSquare.piece);\n        capture = true;\n      } else if (enPassantSquare.piece.color === 'black') {\n        blackGraveyard.push(enPassantSquare.piece);\n        capture = true;\n      }\n\n      enPassantSquare.piece = null;\n    }\n\n    // Physically move the piece\n    destinationSquare.piece = selectedSquare.piece;\n    selectedSquare.piece = null;\n    // Mark piece as having moved\n    destinationSquare.piece.hasMoved = true;\n\n    if (this.promotion(destinationSquare)) {\n      promotion = true;\n      destinationSquare.piece = new Queen(current.color);\n    }\n\n    // Setting up for the next player's turn\n    let nextPlayer = current.color === 'white' ? this.state.players['black'] : this.state.players['white'];\n    let check = this.check(squares, nextPlayer);\n    let checkmate = false;\n    if (check) {\n      checkmate = this.checkmate(squares, nextPlayer);\n    }\n    let message = `${nextPlayer.color}'s turn. Please select a piece to move.`;\n\n    if (checkmate) {\n      message = `Checkmate! Congrats to ${current.color}. You won!`\n    }\n\n    // Updating game record\n    history.logMove({ current: current, piece: destinationSquare.piece, move_to: destinationSquare.index, move_from: selectedSquare.index, check: check, checkmate: checkmate, capture: capture, promotion: promotion, castle: options.castle, enpassant: options.enpassant });\n\n    this.setState(oldState => ({\n      squares: squares,\n      current: nextPlayer,\n      message: message,\n      selectedSquare: null,\n      history: history,\n      blackGraveyard: blackGraveyard,\n      whiteGraveyard: whiteGraveyard,\n      check: check,\n      checkmate: checkmate\n    }));\n  }\n\n  selectSquare(square) {\n    this.setState(oldState => ({\n      message: `Select where to move ${square.piece.name}`,\n      selectedSquare: square\n    }));\n  }\n\n  check(squares, player) {\n    let kingSquare = squares.find((square) => square.piece?.name === `${player.color} king`);\n    let enemySquares = this.pieces(squares, player.color === 'white' ? 'black' : 'white');\n\n    // Cycle through the enemy pieces\n    for (let idx = 0; idx < enemySquares.length; idx++) {\n      let enemySquare = enemySquares[idx];\n\n      // If any of the enemy pieces has a possible move that includes the king square, return true, check\n      if (enemySquare.possibleMoves(squares).includes(kingSquare.index)) {\n        return true;\n      }\n    }\n\n    // Otherwise no check\n    return false;\n  }\n\n  checkmate(squares, player) {\n    let teammates = this.pieces(squares, player.color);\n\n    // Cycle through the teammates...\n    for (let x = 0; x < teammates.length; x++) {\n      let teammate = teammates[x];\n      let possibleMoves = teammate.possibleMoves(squares);\n\n      // Go through each teammate's possible moves...\n      for (let y = 0; y < possibleMoves.length; y++) {\n        let availableMove = possibleMoves[y];\n\n        // If any move gets the King out of check then return false, no checkmate\n        if (!this.check(this.previewMove(teammate, squares[availableMove], squares), player)) {\n          return false;\n        }\n      }\n    }\n\n    // Otherwise return true. No possible moves left.\n    return true;\n  }\n\n  promotion(square) {\n    if (square.piece.className !== 'Pawn') {\n      return false;\n    }\n\n    if (square.piece.color === 'black') {\n      if (square.row === 7) {\n        return true;\n      }\n    } else {\n      if (square.row === 0) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  canEnPassant(selectedSquare, destinationSquare) {\n    let enemyPawnSquare = this.getEnPassantPawn(selectedSquare, destinationSquare);\n    let lastMove = this.state.history.lastMove();\n\n    // Selected piece must be a pawn\n    if (selectedSquare.piece.className !== 'Pawn') {\n      return false;\n    }\n\n    // Selected piece must be in the fifth rank per en passant rules\n    // https://en.wikipedia.org/wiki/En_passant\n    if (!selectedSquare.piece.inFifthRank(selectedSquare.index)) {\n      return false;\n    }\n\n    if (selectedSquare.piece.color === 'black') {\n      // Check if piece is trying to move diagonal\n      if (destinationSquare.index !== selectedSquare.index + 9 && destinationSquare.index !== selectedSquare.index + 7) {\n        return false;\n      }\n    } else {\n      // Check if piece is trying to move diagonal\n      if (destinationSquare.index !== selectedSquare.index - 9 && destinationSquare.index !== selectedSquare.index - 7) {\n        return false;\n      }\n    }\n\n    // Check if piece we're trying to take is an enemy\n    if (enemyPawnSquare.piece?.color === selectedSquare.piece.color) {\n      return false;\n    }\n\n    // Check enemy piece is a pawn\n    if (enemyPawnSquare.piece?.className !== 'Pawn') {\n      return false;\n    }\n\n    // Ensure the piece we're trying to take indeed made the last move and it was a double move\n    if (lastMove.move_to !== enemyPawnSquare.index) {\n      return false;\n    }\n\n    // Check if the last move was a pawn double move\n    if (Math.abs(lastMove.move_from - lastMove.move_to) !== 16) {\n      return false;\n    }\n\n    return true;\n  }\n\n  canCastle(selectedSquare, destinationSquare) {\n    // Selected piece must be a king\n    if (selectedSquare.piece.className !== 'King') {\n      return false;\n    }\n\n    // King must not have moved yet\n    if (selectedSquare.piece.hasMoved) {\n      return false;\n    }\n\n    // There are only two ways to castle, king or queen side, hardcoded the allowed spaces to castle\n    if (selectedSquare.piece.color === 'black') {\n      if (![2, 6].includes(destinationSquare.index)) {\n        return false;\n      }\n    } else {\n      if (![58, 62].includes(destinationSquare.index)) {\n        return false;\n      }\n    }\n\n    // Current player must not be in check\n    if (this.check(this.state.squares, this.state.current)) {\n      return false;\n    }\n\n    // Rook must not have been moved yet\n    let rookSquare = this.getCastlingRook(selectedSquare, destinationSquare);\n    if (rookSquare.piece.hasMoved) {\n      return false;\n    }\n\n    // Squares between the king and the rook must be empty\n    let squaresBetweenKingAndRook = this.squaresBetweenLocations(selectedSquare, rookSquare);\n    for (let i = 0; i < squaresBetweenKingAndRook.length; i++) {\n      if (squaresBetweenKingAndRook[i].piece) {\n        return false;\n      }\n    }\n\n    let squaresBetweenKingAndDestination = this.squaresBetweenLocations(selectedSquare, destinationSquare);\n    let enemySquares = this.pieces(this.state.squares, this.state.current.color === 'white' ? 'black' : 'white');\n    for (let i = 0; i < enemySquares.length; i++) {\n      let possibleMoves = enemySquares[i].possibleMoves(this.state.squares);\n\n      // Make sure no enemy pieces threaten the spaces that the king will move over\n      for (let j = 0; j < squaresBetweenKingAndDestination.length; j++) {\n        if (possibleMoves.includes(squaresBetweenKingAndDestination[j])) {\n          return false;\n        }\n      }\n\n      // Make sure the destination square isn't threatened by any of the enemy pieces\n      if (possibleMoves.includes(destinationSquare.index)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  getCastlingRook(kingSquare, castlingSquare, squares = this.state.squares) {\n    if (castlingSquare.index > kingSquare.index) {\n      if (kingSquare.piece.color === 'black') {\n        return squares[7];\n      } else {\n        return squares[63];\n      }\n    } else {\n      if (kingSquare.piece.color === 'black') {\n        return squares[0];\n      } else {\n        return squares[56];\n      }\n    }\n  }\n\n  getEnPassantPawn(selectedSquare, destinationSquare, squares = this.state.squares) {\n    if (selectedSquare.piece.color === 'black') {\n      return squares[destinationSquare.index - 8];\n    } else {\n      return squares[destinationSquare.index + 8];\n    }\n  }\n\n  squaresBetweenLocations(square1, square2) {\n    const squaresBetween = [];\n\n    if (square1.index > square2.index) {\n      for (let i = square2.index + 1; i < square1.index; i++) {\n        squaresBetween.push(this.state.squares[i]);\n      }\n    } else {\n      for (let i = square1.index + 1; i < square2.index; i++) {\n        squaresBetween.push(this.state.squares[i]);\n      }\n    }\n\n    return squaresBetween;\n  }\n\n  render() {\n    return (\n      <main className=\"container vw-100 vh-100\">\n        <Scoreboard players={this.state.players} current={this.state.current} moves={this.state.history.moves} whiteGraveyard={this.state.whiteGraveyard} blackGraveyard={this.state.blackGraveyard} />\n        <Board squares={this.state.squares} checkmate={this.state.checkmate} message={this.state.message} selectedSquare={this.state.selectedSquare} lastMove={this.state.history.lastMove()} onClick={(index) => this.handleClick(index) }/>\n      </main>\n    );\n  }\n}\n","import './app.css';\nimport Game from './components/game';\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <header className=\"bg-black p-2 white\">\n        <nav className=\"d-grid nav-grid align-items-center\">\n          <div className=\"d-flex justify-content-center\"><h1 className=\"m-0\">Chess</h1></div>\n        </nav>\n      </header>\n      <Game />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}